import{_ as N,h as j,i as g,j as _,r as U,o as m,c as u,a as o,m as y,w as C,k as T,l as i,v as d,n as v,t as p,e as b,g as x,x as B}from"./index-aef3be03.js";const D={class:"create-contact-container"},R={class:"header"},S={class:"card"},q={class:"form-group"},z={key:0,class:"error-message"},A={class:"form-group"},M={class:"form-group"},P={key:0,class:"error-message"},h={class:"form-group"},F={key:0,class:"error-message"},I={class:"form-group"},J={class:"form-group"},$={class:"form-actions"},G=["disabled"],H={__name:"CrearContactoView",setup(K){const V=j(),c=g(!1),n=g(""),f=g(""),t=_({nombre:"",apellido:"",telefono:"",email:"",direccion:"",notas:""}),a=_({nombre:"",telefono:"",email:""}),E=()=>{let l=!0;return a.nombre="",a.telefono="",a.email="",t.nombre.trim()||(a.nombre="El nombre es obligatorio",l=!1),t.telefono.trim()||(a.telefono="El teléfono es obligatorio",l=!1),t.email&&!k(t.email)&&(a.email="El email no tiene un formato válido",l=!1),l},k=l=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l),w=async()=>{var l,e;if(E()){c.value=!0,n.value="";try{const r=await B.post("/contactos/crear.php",t);r.data.success?(n.value="¡Contacto creado exitosamente!",f.value="success",setTimeout(()=>{V.push("/agenda")},1500)):(n.value=r.data.message||"Error al crear contacto",f.value="error")}catch(r){n.value=((e=(l=r.response)==null?void 0:l.data)==null?void 0:e.message)||"Error de conexión",f.value="error"}finally{c.value=!1}}};return(l,e)=>{const r=U("router-link");return m(),u("div",D,[o("div",R,[e[7]||(e[7]=o("h1",null,"Crear Nuevo Contacto",-1)),y(r,{to:"/agenda",class:"btn btn-secondary"},{default:C(()=>[...e[6]||(e[6]=[x(" Volver a Agenda ",-1)])]),_:1})]),o("div",S,[o("form",{onSubmit:T(w,["prevent"])},[o("div",q,[e[8]||(e[8]=o("label",{for:"nombre"},"Nombre *",-1)),i(o("input",{type:"text",id:"nombre","onUpdate:modelValue":e[0]||(e[0]=s=>t.nombre=s),required:"",class:v({"input-error":a.nombre}),placeholder:"Ej: Juan"},null,2),[[d,t.nombre]]),a.nombre?(m(),u("span",z,p(a.nombre),1)):b("",!0)]),o("div",A,[e[9]||(e[9]=o("label",{for:"apellido"},"Apellido",-1)),i(o("input",{type:"text",id:"apellido","onUpdate:modelValue":e[1]||(e[1]=s=>t.apellido=s),placeholder:"Ej: Pérez"},null,512),[[d,t.apellido]])]),o("div",M,[e[10]||(e[10]=o("label",{for:"telefono"},"Teléfono *",-1)),i(o("input",{type:"tel",id:"telefono","onUpdate:modelValue":e[2]||(e[2]=s=>t.telefono=s),required:"",class:v({"input-error":a.telefono}),placeholder:"Ej: +34 612 345 678"},null,2),[[d,t.telefono]]),a.telefono?(m(),u("span",P,p(a.telefono),1)):b("",!0)]),o("div",h,[e[11]||(e[11]=o("label",{for:"email"},"Email",-1)),i(o("input",{type:"email",id:"email","onUpdate:modelValue":e[3]||(e[3]=s=>t.email=s),class:v({"input-error":a.email}),placeholder:"Ej: juan@email.com"},null,2),[[d,t.email]]),a.email?(m(),u("span",F,p(a.email),1)):b("",!0)]),o("div",I,[e[12]||(e[12]=o("label",{for:"direccion"},"Dirección",-1)),i(o("input",{type:"text",id:"direccion","onUpdate:modelValue":e[4]||(e[4]=s=>t.direccion=s),placeholder:"Ej: Calle Principal 123, Ciudad"},null,512),[[d,t.direccion]])]),o("div",J,[e[13]||(e[13]=o("label",{for:"notas"},"Notas",-1)),i(o("textarea",{id:"notas","onUpdate:modelValue":e[5]||(e[5]=s=>t.notas=s),rows:"4",placeholder:"Notas adicionales sobre el contacto..."},null,512),[[d,t.notas]])]),o("div",$,[o("button",{type:"submit",class:"btn btn-primary",disabled:c.value},p(c.value?"Creando...":"Crear Contacto"),9,G),y(r,{to:"/agenda",class:"btn btn-secondary"},{default:C(()=>[...e[14]||(e[14]=[x(" Cancelar ",-1)])]),_:1})])],32),n.value?(m(),u("div",{key:0,class:v(["message",f.value])},p(n.value),3)):b("",!0)])])}}},O=N(H,[["__scopeId","data-v-f94eae77"]]);export{O as default};
