import{_ as h,h as L,u as S,i as c,j as v,r as C,o as i,c as l,a,k as N,l as g,v as w,n as m,t as u,e as _,g as f,m as I,w as T}from"./index-aef3be03.js";const q={class:"login-container"},B={class:"card",style:{"max-width":"400px"}},U={class:"form-group"},D={key:0,class:"error-message"},E={class:"form-group"},M={key:0,class:"error-message"},R=["disabled"],j={class:"register-link"},z={__name:"LoginView",setup(A){const y=L(),b=S(),n=c(!1),t=c(""),d=c(""),o=v({username:"",password:""}),s=v({username:"",password:""}),x=()=>{let r=!0;return s.username="",s.password="",o.username.trim()||(s.username="El usuario es obligatorio",r=!1),o.password?o.password.length<6&&(s.password="La contraseña debe tener al menos 6 caracteres",r=!1):(s.password="La contraseña es obligatoria",r=!1),r},V=async()=>{if(!x())return;n.value=!0,t.value="";const r=await b.login(o.username,o.password);r.success?(t.value="¡Login exitoso!",d.value="success",setTimeout(()=>{y.push("/agenda")},1e3)):(t.value=r.message,d.value="error"),n.value=!1};return(r,e)=>{const k=C("router-link");return i(),l("div",q,[a("div",B,[e[6]||(e[6]=a("h2",null,"Iniciar Sesión",-1)),a("form",{onSubmit:N(V,["prevent"])},[a("div",U,[e[2]||(e[2]=a("label",{for:"username"},"Usuario:",-1)),g(a("input",{type:"text",id:"username","onUpdate:modelValue":e[0]||(e[0]=p=>o.username=p),required:"",class:m({"input-error":s.username})},null,2),[[w,o.username]]),s.username?(i(),l("span",D,u(s.username),1)):_("",!0)]),a("div",E,[e[3]||(e[3]=a("label",{for:"password"},"Contraseña:",-1)),g(a("input",{type:"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=p=>o.password=p),required:"",class:m({"input-error":s.password})},null,2),[[w,o.password]]),s.password?(i(),l("span",M,u(s.password),1)):_("",!0)]),a("button",{type:"submit",class:"btn btn-primary",disabled:n.value,style:{width:"100%"}},u(n.value?"Iniciando...":"Iniciar Sesión"),9,R),a("p",j,[e[5]||(e[5]=f(" ¿No tienes cuenta? ",-1)),I(k,{to:"/registro"},{default:T(()=>[...e[4]||(e[4]=[f("Regístrate aquí",-1)])]),_:1})])],32),t.value?(i(),l("div",{key:0,class:m(["message",d.value])},u(t.value),3)):_("",!0)])])}}},G=h(z,[["__scopeId","data-v-c8c38c78"]]);export{G as default};
