import{_ as x,u as L,i as v,p as S,q as A,r as M,o as n,c as a,a as t,m as p,w as f,b as T,l as q,v as B,t as r,g as l,F as $,s as F,e as _,x as w}from"./index-aef3be03.js";const I={class:"agenda-container"},P={class:"header"},U={class:"header-actions"},j={class:"search-bar"},z={key:0,class:"loading"},G={key:1,class:"empty-state"},H={key:0},J={key:1},K={key:2,class:"contacts-grid"},O={class:"contact-info"},Q={key:0},R={key:1},W={key:2},X={class:"date"},Y={class:"contact-actions"},Z=["onClick"],ee={key:3,class:"modal"},te={class:"modal-content"},oe={__name:"AgendaView",setup(se){const D=L(),g=v([]),b=v(!1),d=v(""),m=v(!1),u=v(null),y=S(()=>{if(!d.value)return g.value;const o=d.value.toLowerCase();return g.value.filter(e=>{var i,c;return e.nombre.toLowerCase().includes(o)||((i=e.apellido)==null?void 0:i.toLowerCase().includes(o))||e.telefono.includes(o)||((c=e.email)==null?void 0:c.toLowerCase().includes(o))})}),C=async()=>{b.value=!0;try{const o=await w.get("/contactos/");o.data.success&&(g.value=o.data.data)}catch(o){console.error("Error cargando contactos:",o)}finally{b.value=!1}},E=o=>{u.value=o,m.value=!0},h=()=>{m.value=!1,u.value=null},N=async()=>{try{(await w.delete(`/contactos/eliminar.php?id=${u.value.id}`)).data.success&&(await C(),m.value=!1,u.value=null)}catch(o){console.error("Error eliminando contacto:",o)}},V=o=>new Date(o).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return A(()=>{C()}),(o,e)=>{var c,k;const i=M("router-link");return n(),a("div",I,[t("header",P,[e[5]||(e[5]=t("h1",null,"Mi Agenda de Contactos",-1)),t("div",U,[p(i,{to:"/agenda/crear",class:"btn btn-primary"},{default:f(()=>[...e[3]||(e[3]=[l(" Nuevo Contacto ",-1)])]),_:1}),p(i,{to:"/perfil",class:"btn btn-secondary"},{default:f(()=>[...e[4]||(e[4]=[l(" Mi Perfil ",-1)])]),_:1}),t("button",{onClick:e[0]||(e[0]=s=>T(D).logout()),class:"btn btn-delete"}," Cerrar SesiÃ³n ")])]),t("div",j,[q(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>d.value=s),placeholder:"Buscar contactos por nombre, apellido, telÃ©fono o email...",onInput:e[2]||(e[2]=(...s)=>o.filterContacts&&o.filterContacts(...s)),class:"search-input"},null,544),[[B,d.value]])]),b.value?(n(),a("div",z,"Cargando contactos...")):y.value.length===0?(n(),a("div",G,[d.value?(n(),a("p",H,'No se encontraron contactos que coincidan con "'+r(d.value)+'"',1)):(n(),a("p",J,[e[7]||(e[7]=l("No tienes contactos aÃºn. ",-1)),p(i,{to:"/agenda/crear"},{default:f(()=>[...e[6]||(e[6]=[l("Â¡Crea tu primer contacto!",-1)])]),_:1})]))])):(n(),a("div",K,[(n(!0),a($,null,F(y.value,s=>(n(),a("div",{key:s.id,class:"contact-card"},[t("div",O,[t("h3",null,r(s.nombre)+" "+r(s.apellido),1),t("p",null,[e[8]||(e[8]=t("strong",null,"ðŸ“ž TelÃ©fono:",-1)),l(" "+r(s.telefono),1)]),s.email?(n(),a("p",Q,[e[9]||(e[9]=t("strong",null,"ðŸ“§ Email:",-1)),l(" "+r(s.email),1)])):_("",!0),s.direccion?(n(),a("p",R,[e[10]||(e[10]=t("strong",null,"ðŸ  DirecciÃ³n:",-1)),l(" "+r(s.direccion),1)])):_("",!0),s.notas?(n(),a("p",W,[e[11]||(e[11]=t("strong",null,"ðŸ“ Notas:",-1)),l(" "+r(s.notas),1)])):_("",!0),t("small",X,"Creado: "+r(V(s.fecha_creacion)),1)]),t("div",Y,[p(i,{to:`/agenda/editar/${s.id}`,class:"btn btn-edit"},{default:f(()=>[...e[12]||(e[12]=[l(" Editar ",-1)])]),_:1},8,["to"]),t("button",{onClick:ne=>E(s),class:"btn btn-delete"}," Eliminar ",8,Z)])]))),128))])),m.value?(n(),a("div",ee,[t("div",te,[e[15]||(e[15]=t("h3",null,"Confirmar EliminaciÃ³n",-1)),t("p",null,[e[13]||(e[13]=l("Â¿EstÃ¡s seguro de que quieres eliminar a ",-1)),t("strong",null,r((c=u.value)==null?void 0:c.nombre)+" "+r((k=u.value)==null?void 0:k.apellido),1),e[14]||(e[14]=l("?",-1))]),t("div",{class:"modal-actions"},[t("button",{onClick:N,class:"btn btn-delete"},"Eliminar"),t("button",{onClick:h,class:"btn btn-secondary"},"Cancelar")])])])):_("",!0)])}}},le=x(oe,[["__scopeId","data-v-2310b8f9"]]);export{le as default};
